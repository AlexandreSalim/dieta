"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5997],{3923:(_,R,u)=>{u.d(R,{$o:()=>d,_G:()=>S,Vq:()=>b,SQ:()=>j});var d=function(i){return i.Loaded="applePayLoaded",i.FailedToLoad="applePayFailedToLoad",i.Completed="applePayCompleted",i.Canceled="applePayCanceled",i.Failed="applePayFailed",i.DidSelectShippingContact="applePayDidSelectShippingContact",i.DidCreatePaymentMethod="applePayDidCreatePaymentMethod",i}(d||{}),S=function(i){return i.Loaded="googlePayLoaded",i.FailedToLoad="googlePayFailedToLoad",i.Completed="googlePayCompleted",i.Canceled="googlePayCanceled",i.Failed="googlePayFailed",i}(S||{}),b=function(i){return i.Loaded="paymentFlowLoaded",i.FailedToLoad="paymentFlowFailedToLoad",i.Opened="paymentFlowOpened",i.Created="paymentFlowCreated",i.Completed="paymentFlowCompleted",i.Canceled="paymentFlowCanceled",i.Failed="paymentFlowFailed",i}(b||{}),j=function(i){return i.Loaded="paymentSheetLoaded",i.FailedToLoad="paymentSheetFailedToLoad",i.Completed="paymentSheetCompleted",i.Canceled="paymentSheetCanceled",i.Failed="paymentSheetFailed",i}(j||{})},5997:(_,R,u)=>{u.r(R),u.d(R,{PaymentSheetPageModule:()=>H});var d=u(8434),S=u(4341),b=u(7125),j=u(33),i=u(467),J=u(1594),M=u(9350);function k(c,C){const n="object"==typeof C;return new Promise((e,t)=>{let o,a=!1;c.subscribe({next:r=>{o=r,a=!0},error:t,complete:()=>{a?e(o):n?e(C.defaultValue):t(new M.G)}})})}var U=u(5312),z=u(7464),v=u(3923);const f=(0,z.F3)("Stripe",{web:()=>u.e(1651).then(u.bind(u,1651)).then(c=>new c.StripeWeb)});var s=u(1360),Q=u(3165);const W=[{path:"",component:(()=>{var c;class C{constructor(e){this.http=e,this.data={name:"alexandre",email:"ale@gmail.com",amount:100,currency:"brl"},f.initialize({publishableKey:U.c.stripe.publishableKey})}httpPost(e){return this.http.post(U.c.api+"payment-sheet",e).pipe((0,J.$)())}paymentShet(){var e=this;return(0,i.A)(function*(){try{f.addListener(v.SQ.Completed,()=>{console.log("PaymentSheetEventsEnum.Completed")});const t=e.httpPost(e.data),{paymentIntent:a,ephemeralKey:o,customer:r}=yield k(t);yield f.createPaymentSheet({paymentIntentClientSecret:a,customerId:r,customerEphemeralKeySecret:o,merchantDisplayName:"Caloria de bolso"});const l=yield f.presentPaymentSheet();l&&l.paymentResult===v.SQ.Completed&&e.aplitAndJoin(a)}catch(t){console.log(t,"payment-sheet")}})()}paymentFlow(){var e=this;return(0,i.A)(function*(){f.addListener(v.Vq.Completed,()=>{console.log("PaymentFlowEventsEnum.Completed")});const t=e.httpPost(e.data),{paymentIntent:a,ephemeralKey:o,customer:r}=yield k(t);yield f.createPaymentFlow({paymentIntentClientSecret:a,customerEphemeralKeySecret:o,customerId:r,merchantDisplayName:"Technyks"});const l=yield f.presentPaymentFlow();console.log(l),(yield f.confirmPaymentFlow()).paymentResult===v.Vq.Completed&&e.aplitAndJoin(a)})()}applePay(){var e=this;return(0,i.A)(function*(){if(void 0===f.isApplePayAvailable().catch(()=>{}))return;f.addListener(v.$o.Completed,()=>{console.log("ApplePayEventsEnum.Completed")});const a=e.httpPost(e.data),{paymentIntent:o}=yield k(a);yield f.createApplePay({paymentIntentClientSecret:o,paymentSummaryItems:[{label:"Technyks",amount:1099}],merchantIdentifier:"rdlabo",countryCode:"BR",currency:"BRL"}),(yield f.presentApplePay()).paymentResult===v.$o.Completed&&e.aplitAndJoin(o)})()}googlepay(){var e=this;return(0,i.A)(function*(){if(void 0===f.isGooglePayAvailable().catch(()=>{}))return;f.addListener(v._G.Completed,()=>{console.log("GooglePayEventsEnum.Completed")});const a=e.httpPost(e.data),{paymentIntent:o}=yield k(a);yield f.createGooglePay({paymentIntentClientSecret:o,paymentSummaryItems:[{label:"Technyks",amount:1099}],merchantIdentifier:"merchant.com.getcapacitor.stripe",countryCode:"BR",currency:"BRL"}),(yield f.presentGooglePay()).paymentResult===v._G.Completed&&e.aplitAndJoin(o)})()}aplitAndJoin(e){const t=e.split("_").slice(0,2).join("_");return console.log("paymentIntent"),t}}return(c=C).\u0275fac=function(e){return new(e||c)(s.rXU(Q.Qq))},c.\u0275cmp=s.VBU({type:c,selectors:[["app-payment-sheet"]],standalone:!1,decls:13,vars:0,consts:[["color","primary"],[1,"ion-padding"],["expand","block",1,"ion-margin-top",3,"click"]],template:function(e,t){1&e&&(s.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),s.EFF(3," Stripe "),s.k0s()()(),s.j41(4,"ion-content",1)(5,"ion-button",2),s.bIt("click",function(){return t.paymentShet()}),s.EFF(6,"paymentShet"),s.k0s(),s.j41(7,"ion-button",2),s.bIt("click",function(){return t.paymentFlow()}),s.EFF(8,"paymentFlow"),s.k0s(),s.j41(9,"ion-button",2),s.bIt("click",function(){return t.applePay()}),s.EFF(10,"applePay"),s.k0s(),s.j41(11,"ion-button",2),s.bIt("click",function(){return t.googlepay()}),s.EFF(12,"googlepay"),s.k0s()())},dependencies:[b.Jm,b.W9,b.eU,b.BC,b.ai],encapsulation:2}),C})()}];let G=(()=>{var c;class C{}return(c=C).\u0275fac=function(e){return new(e||c)},c.\u0275mod=s.$C({type:c}),c.\u0275inj=s.G2t({imports:[j.iI.forChild(W),j.iI]}),C})(),H=(()=>{var c;class C{}return(c=C).\u0275fac=function(e){return new(e||c)},c.\u0275mod=s.$C({type:c}),c.\u0275inj=s.G2t({imports:[d.MD,S.YN,b.bv,G]}),C})()},7464:(_,R,u)=>{u.d(R,{E_:()=>U,F3:()=>k});var d=u(467),S=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(S||{});class b extends Error{constructor(e,t,a){super(e),this.message=e,this.code=t,this.data=a}}const i=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},a=t.Plugins=t.Plugins||{},o=()=>null!==e?e.name:(n=>{var e,t;return null!=n&&n.androidBridge?"android":null!==(t=null===(e=null==n?void 0:n.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(n),m=p=>{var h;return null===(h=t.PluginHeaders)||void 0===h?void 0:h.find(B=>B.name===p)},w=new Map;return t.convertFileSrc||(t.convertFileSrc=p=>p),t.getPlatform=o,t.handleError=p=>n.console.error(p),t.isNativePlatform=()=>"web"!==o(),t.isPluginAvailable=p=>{const h=w.get(p);return!!(null!=h&&h.platforms.has(o())||m(p))},t.registerPlugin=(p,h={})=>{const B=w.get(p);if(B)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),B.proxy;const O=o(),x=m(p);let F;const q=function(){var y=(0,d.A)(function*(){return!F&&O in h?F=F="function"==typeof h[O]?yield h[O]():h[O]:null!==e&&!F&&"web"in h&&(F=F="function"==typeof h.web?yield h.web():h.web),F});return function(){return y.apply(this,arguments)}}(),K=y=>{let P;const A=(...$)=>{const T=q().then(L=>{const I=((y,P)=>{var A,$;if(!x){if(y)return null===($=y[P])||void 0===$?void 0:$.bind(y);throw new b(`"${p}" plugin is not implemented on ${O}`,S.Unimplemented)}{const T=null==x?void 0:x.methods.find(L=>P===L.name);if(T)return"promise"===T.rtype?L=>t.nativePromise(p,P.toString(),L):(L,I)=>t.nativeCallback(p,P.toString(),L,I);if(y)return null===(A=y[P])||void 0===A?void 0:A.bind(y)}})(L,y);if(I){const D=I(...$);return P=null==D?void 0:D.remove,D}throw new b(`"${p}.${y}()" is not implemented on ${O}`,S.Unimplemented)});return"addListener"===y&&(T.remove=(0,d.A)(function*(){return P()})),T};return A.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(A,"name",{value:y,writable:!1,configurable:!1}),A},Y=K("addListener"),Z=K("removeListener"),ee=(y,P)=>{const A=Y({eventName:y},P),$=function(){var L=(0,d.A)(function*(){const I=yield A;Z({eventName:y,callbackId:I},P)});return function(){return L.apply(this,arguments)}}(),T=new Promise(L=>A.then(()=>L({remove:$})));return T.remove=(0,d.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield $()}),T},V=new Proxy({},{get(y,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?ee:Y;case"removeListener":return Z;default:return K(P)}}});return a[p]=V,w.set(p,{name:p,proxy:V,platforms:new Set([...Object.keys(h),...x?[O]:[]])}),V},t.Exception=b,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},M=(n=>n.Capacitor=i(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),k=M.registerPlugin;class U{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){var a=this;let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),o&&this.sendRetainedArgumentsForEvent(e);const m=function(){var w=(0,d.A)(function*(){return a.removeListener(e,t)});return function(){return w.apply(this,arguments)}}();return Promise.resolve({remove:m})}removeAllListeners(){var e=this;return(0,d.A)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t,a){const o=this.listeners[e];if(o)o.forEach(r=>r(t));else if(a){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:a=>{this.notifyListeners(t,a)}}}unimplemented(e="not implemented"){return new M.Exception(e,S.Unimplemented)}unavailable(e="not available"){return new M.Exception(e,S.Unavailable)}removeListener(e,t){var a=this;return(0,d.A)(function*(){const o=a.listeners[e];if(!o)return;const r=o.indexOf(t);a.listeners[e].splice(r,1),a.listeners[e].length||a.removeWindowListener(a.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(a=>{this.notifyListeners(e,a)}))}}const v=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),f=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class s extends U{getCookies(){return(0,d.A)(function*(){const e=document.cookie,t={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[o,r]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=f(o).trim(),r=f(r).trim(),t[o]=r}),t})()}setCookie(e){return(0,d.A)(function*(){try{const t=v(e.key),a=v(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),l=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${a||""}${o}; path=${r}; ${l};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,d.A)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,d.A)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,d.A)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}k("CapacitorCookies",{web:()=>new s});const X=function(){var n=(0,d.A)(function*(e){return new Promise((t,a)=>{const o=new FileReader;o.onload=()=>{const r=o.result;t(r.indexOf(",")>=0?r.split(",")[1]:r)},o.onerror=r=>a(r),o.readAsDataURL(e)})});return function(t){return n.apply(this,arguments)}}();class c extends U{request(e){return(0,d.A)(function*(){const t=((n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),o=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(o=>o.toLocaleLowerCase()).reduce((o,r,l)=>(o[r]=n[e[l]],o),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)t.body=n.data;else if(o.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[l,m]of Object.entries(n.data||{}))r.set(l,m);t.body=r.toString()}else if(o.includes("multipart/form-data")||n.data instanceof FormData){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((m,g)=>{r.append(g,m)});else for(const m of Object.keys(n.data))r.append(m,n.data[m]);t.body=r;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(o.includes("application/json")||"object"==typeof n.data)&&(t.body=JSON.stringify(n.data));return t})(e,e.webFetchExtra),a=((n,e=!0)=>n?Object.entries(n).reduce((a,o)=>{const[r,l]=o;let m,g;return Array.isArray(l)?(g="",l.forEach(w=>{m=e?encodeURIComponent(w):w,g+=`${r}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(l):l,g=`${r}=${m}`),`${a}&${g}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),o=a?`${e.url}?${a}`:e.url,r=yield fetch(o,t),l=r.headers.get("content-type")||"";let g,w,{responseType:m="text"}=r.ok?e:{};switch(l.includes("application/json")&&(m="json"),m){case"arraybuffer":case"blob":w=yield r.blob(),g=yield X(w);break;case"json":g=yield r.json();break;default:g=yield r.text()}const E={};return r.headers.forEach((p,h)=>{E[h]=p}),{data:g,headers:E,status:r.status,url:r.url}})()}get(e){var t=this;return(0,d.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,d.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,d.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,d.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,d.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}k("CapacitorHttp",{web:()=>new c})}}]);