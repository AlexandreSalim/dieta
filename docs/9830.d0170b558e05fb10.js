"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9830],{9830:(Re,fe,F)=>{F.d(fe,{Dw:()=>he,Zr:()=>ve});var pe=F(467),o=F(9842),d=F(1360),re=F(9361),ae=F(4341),i=function(p){return p.SEPARATOR="separator",p.PERCENT="percent",p.IP="IP",p.CPF_CNPJ="CPF_CNPJ",p.MONTH="M",p.MONTHS="M0",p.MINUTE="m",p.HOUR="h",p.HOURS="H",p.MINUTES="m0",p.HOURS_HOUR="Hh",p.SECONDS="s0",p.HOURS_MINUTES_SECONDS="Hh:m0:s0",p.EMAIL_MASK="A*@A*.A*",p.HOURS_MINUTES="Hh:m0",p.MINUTES_SECONDS="m0:s0",p.DAYS_MONTHS_YEARS="d0/M0/0000",p.DAYS_MONTHS="d0/M0",p.DAYS="d0",p.DAY="d",p.SECOND="s",p.LETTER_S="S",p.DOT=".",p.COMMA=",",p.CURLY_BRACKETS_LEFT="{",p.CURLY_BRACKETS_RIGHT="}",p.MINUS="-",p.OR="||",p.HASH="#",p.EMPTY_STRING="",p.SYMBOL_STAR="*",p.SYMBOL_QUESTION="?",p.SLASH="/",p.WHITE_SPACE=" ",p.NUMBER_ZERO="0",p.NUMBER_NINE="9",p.BACKSPACE="Backspace",p.DELETE="Delete",p.ARROW_LEFT="ArrowLeft",p.ARROW_UP="ArrowUp",p.DOUBLE_ZERO="00",p}(i||{});const $=new d.nKC("ngx-mask config"),ne=new d.nKC("new ngx-mask config"),le=new d.nKC("initial ngx-mask config"),de={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showMaskTyped:!1,instantPrefix:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:!1,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:p=>p,outputTransformFn:p=>p,maskFilled:new d.bkB,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},me=[i.HOURS_MINUTES_SECONDS,i.HOURS_MINUTES,i.MINUTES_SECONDS],_e=[i.PERCENT,i.HOURS_HOUR,i.SECONDS,i.MINUTES,i.SEPARATOR,i.DAYS_MONTHS_YEARS,i.DAYS_MONTHS,i.DAYS,i.MONTHS];let Se=(()=>{var p;class E{constructor(){(0,o.A)(this,"_config",(0,d.WQX)($)),(0,o.A)(this,"dropSpecialCharacters",this._config.dropSpecialCharacters),(0,o.A)(this,"hiddenInput",this._config.hiddenInput),(0,o.A)(this,"clearIfNotMatch",this._config.clearIfNotMatch),(0,o.A)(this,"specialCharacters",this._config.specialCharacters),(0,o.A)(this,"patterns",this._config.patterns),(0,o.A)(this,"prefix",this._config.prefix),(0,o.A)(this,"suffix",this._config.suffix),(0,o.A)(this,"thousandSeparator",this._config.thousandSeparator),(0,o.A)(this,"decimalMarker",this._config.decimalMarker),(0,o.A)(this,"customPattern",void 0),(0,o.A)(this,"showMaskTyped",this._config.showMaskTyped),(0,o.A)(this,"placeHolderCharacter",this._config.placeHolderCharacter),(0,o.A)(this,"validation",this._config.validation),(0,o.A)(this,"separatorLimit",this._config.separatorLimit),(0,o.A)(this,"allowNegativeNumbers",this._config.allowNegativeNumbers),(0,o.A)(this,"leadZeroDateTime",this._config.leadZeroDateTime),(0,o.A)(this,"leadZero",this._config.leadZero),(0,o.A)(this,"apm",this._config.apm),(0,o.A)(this,"inputTransformFn",this._config.inputTransformFn),(0,o.A)(this,"outputTransformFn",this._config.outputTransformFn),(0,o.A)(this,"keepCharacterPositions",this._config.keepCharacterPositions),(0,o.A)(this,"instantPrefix",this._config.instantPrefix),(0,o.A)(this,"_shift",new Set),(0,o.A)(this,"plusOnePosition",!1),(0,o.A)(this,"maskExpression",""),(0,o.A)(this,"actualValue",""),(0,o.A)(this,"showKeepCharacterExp",""),(0,o.A)(this,"shownMaskExpression",""),(0,o.A)(this,"deletedSpecialCharacter",!1),(0,o.A)(this,"ipError",void 0),(0,o.A)(this,"cpfCnpjError",void 0),(0,o.A)(this,"_formatWithSeparators",(t,e,s,a)=>{var h;let c=[],u="";if(Array.isArray(s)){var n,l;const r=new RegExp(s.map(f=>"[\\^$.|?*+()".indexOf(f)>=0?`\\${f}`:f).join("|"));c=t.split(r),u=null!==(n=null===(l=t.match(r))||void 0===l?void 0:l[0])&&void 0!==n?n:i.EMPTY_STRING}else c=t.split(s),u=s;const S=c.length>1?`${u}${c[1]}`:i.EMPTY_STRING;let _=null!==(h=c[0])&&void 0!==h?h:i.EMPTY_STRING;const g=this.separatorLimit.replace(/\s/g,i.EMPTY_STRING);g&&+g&&(_=_[0]===i.MINUS?`-${_.slice(1,_.length).slice(0,g.length)}`:_.slice(0,g.length));const k=/(\d+)(\d{3})/;for(;e&&k.test(_);)_=_.replace(k,"$1"+e+"$2");return typeof a>"u"?_+S:0===a?_:_+S.substring(0,a+1)}),(0,o.A)(this,"percentage",t=>{const e=t.replace(",","."),s=Number(this.allowNegativeNumbers&&t.includes(i.MINUS)?e.slice(1,t.length):e);return!isNaN(s)&&s>=0&&s<=100}),(0,o.A)(this,"getPrecision",t=>{const e=t.split(i.DOT);return e.length>1?Number(e[e.length-1]):1/0}),(0,o.A)(this,"checkAndRemoveSuffix",t=>{for(let c=(null===(e=this.suffix)||void 0===e?void 0:e.length)-1;c>=0;c--){var e,s,a,h;const u=this.suffix.substring(c,null===(s=this.suffix)||void 0===s?void 0:s.length);if(t.includes(u)&&c!==(null===(a=this.suffix)||void 0===a?void 0:a.length)-1&&(c-1<0||!t.includes(this.suffix.substring(c-1,null===(h=this.suffix)||void 0===h?void 0:h.length))))return t.replace(u,i.EMPTY_STRING)}return t}),(0,o.A)(this,"checkInputPrecision",(t,e,s)=>{let a=t,h=s;if(e<1/0){var c,u;if(Array.isArray(h)){const _=h.find(g=>g!==this.thousandSeparator);h=_||h[0]}const n=new RegExp(this._charToRegExpExpression(h)+`\\d{${e}}.*$`),l=a.match(n),S=null!==(c=l&&(null===(u=l[0])||void 0===u?void 0:u.length))&&void 0!==c?c:0;S-1>e&&(a=a.substring(0,a.length-(S-1-e))),0===e&&this._compareOrIncludes(a[a.length-1],h,this.thousandSeparator)&&(a=a.substring(0,a.length-1))}return a})}applyMask(t,e,s=0,a=!1,h=!1,c=()=>{}){var u;if(!e||"string"!=typeof t)return i.EMPTY_STRING;let n=0,l="",S=!1,_=!1,g=1,k=!1,r=t,f=s;r.slice(0,this.prefix.length)===this.prefix&&(r=r.slice(this.prefix.length,r.length)),this.suffix&&r.length>0&&(r=this.checkAndRemoveSuffix(r)),"("===r&&this.prefix&&(r="");const T=r.toString().split(i.EMPTY_STRING);if(this.allowNegativeNumbers&&r.slice(n,n+1)===i.MINUS&&(l+=r.slice(n,n+1)),e===i.IP){const v=r.split(i.DOT);this.ipError=this._validIP(v),e="099.099.099.099"}const y=[];for(let v=0;v<r.length;v++){var w,O;null!==(w=r[v])&&void 0!==w&&w.match("\\d")&&y.push(null!==(O=r[v])&&void 0!==O?O:i.EMPTY_STRING)}if(e===i.CPF_CNPJ&&(this.cpfCnpjError=11!==y.length&&14!==y.length,e=y.length>11?"00.000.000/0000-00":"000.000.000-00"),e.startsWith(i.PERCENT)){if(r.match("[a-z]|[A-Z]")||r.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!h){r=this._stripToDecimal(r);const b=this.getPrecision(e);r=this.checkInputPrecision(r,b,this.decimalMarker)}const v="string"==typeof this.decimalMarker?this.decimalMarker:i.DOT;if(r.indexOf(v)>0&&!this.percentage(r.substring(0,r.indexOf(v)))){let b=r.substring(0,r.indexOf(v)-1);this.allowNegativeNumbers&&r.slice(n,n+1)===i.MINUS&&!h&&(b=r.substring(0,r.indexOf(v))),r=`${b}${r.substring(r.indexOf(v),r.length)}`}let m="";m=this.allowNegativeNumbers&&r.slice(n,n+1)===i.MINUS?`${i.MINUS}${r.slice(n+1,n+r.length)}`:r,l=this.percentage(m)?this._splitPercentZero(r):this._splitPercentZero(r.substring(0,r.length-1))}else if(e.startsWith(i.SEPARATOR)){(r.match("[w\u0430-\u044f\u0410-\u042f]")||r.match("[\u0401\u0451\u0410-\u044f]")||r.match("[a-z]|[A-Z]")||r.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||r.match("[^A-Za-z0-9,]"))&&(r=this._stripToDecimal(r));const v=this.getPrecision(e);let m=this.decimalMarker;if(Array.isArray(this.decimalMarker)&&(m=this.actualValue.includes(this.decimalMarker[0])||this.actualValue.includes(this.decimalMarker[1])?this.actualValue.includes(this.decimalMarker[0])?this.decimalMarker[0]:this.decimalMarker[1]:this.decimalMarker.find(M=>M!==this.thousandSeparator)),h){const{decimalMarkerIndex:M,nonZeroIndex:C}=this._findFirstNonZeroAndDecimalIndex(r,m),D=r[0]===i.MINUS;(r[0]===m&&!C||D&&r[1]===m&&!C||r[0]===i.NUMBER_ZERO&&!M&&!C)&&(r=i.NUMBER_ZERO),M&&C&&D&&1===f&&(M<C||M>C)&&(r=i.MINUS+r.slice(C)),!M&&C&&r.length>C&&(r=D?i.MINUS+r.slice(C):r.slice(C)),M&&C&&0===f&&(M<C&&(r=r.slice(M-1)),M>C&&(r=r.slice(C)))}0===v?r=this.allowNegativeNumbers?r.length>2&&r[0]===i.MINUS&&r[1]===i.NUMBER_ZERO&&r[2]!==this.thousandSeparator&&r[2]!==i.COMMA&&r[2]!==i.DOT?"-"+r.slice(2,r.length):r[0]===i.NUMBER_ZERO&&r.length>1&&r[1]!==this.thousandSeparator&&r[1]!==i.COMMA&&r[1]!==i.DOT?r.slice(1,r.length):r:r.length>1&&r[0]===i.NUMBER_ZERO&&r[1]!==this.thousandSeparator&&r[1]!==i.COMMA&&r[1]!==i.DOT?r.slice(1,r.length):r:(r[0]===m&&r.length>1&&!h&&(r=i.NUMBER_ZERO+r.slice(0,r.length+1),this.plusOnePosition=!0),r[0]===i.NUMBER_ZERO&&r[1]!==m&&r[1]!==this.thousandSeparator&&!h&&(r=r.length>1?r.slice(0,1)+m+r.slice(1,r.length+1):r,this.plusOnePosition=!0),this.allowNegativeNumbers&&!h&&r[0]===i.MINUS&&(r[1]===m||r[1]===i.NUMBER_ZERO)&&(r=r[1]===m&&r.length>2?r.slice(0,1)+i.NUMBER_ZERO+r.slice(1,r.length):r[1]===i.NUMBER_ZERO&&r.length>2&&r[2]!==m?r.slice(0,2)+m+r.slice(2,r.length):r,this.plusOnePosition=!0));const b=this._charToRegExpExpression(this.thousandSeparator);let A='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(b,"");if(Array.isArray(this.decimalMarker))for(const M of this.decimalMarker)A=A.replace(this._charToRegExpExpression(M),i.EMPTY_STRING);else A=A.replace(this._charToRegExpExpression(this.decimalMarker),"");const U=new RegExp("["+A+"]");r.match(U)&&(r=r.substring(0,r.length-1)),r=this.checkInputPrecision(r,v,this.decimalMarker);const B=r.replace(new RegExp(b,"g"),"");l=this._formatWithSeparators(B,this.thousandSeparator,this.decimalMarker,v);const se=l.indexOf(i.COMMA)-r.indexOf(i.COMMA),x=l.length-r.length;if((l[f-1]===this.thousandSeparator||l[f-this.prefix.length])&&this.prefix&&h)f-=1;else if(x>0&&l[f]!==this.thousandSeparator||h&&l.length<t.length&&this.separatorLimit){_=!0;let M=0;do{this._shift.add(f+M),M++}while(M<x)}else l[f-1]===this.thousandSeparator||-4===x||-3===x||l[f]===this.thousandSeparator?(this._shift.clear(),this._shift.add(f-1)):0!==se&&f>0&&!(l.indexOf(i.COMMA)>=f&&f>3)||!(l.indexOf(i.DOT)>=f&&f>3)&&x<=0?(this._shift.clear(),_=!0,g=x,f+=x,this._shift.add(f)):this._shift.clear()}else for(let v=0,m=T[0];v<T.length;v++,m=null!==(P=T[v])&&void 0!==P?P:i.EMPTY_STRING){var P,R,V,Y,H,L,N,G,X,z,J,q;if(n===e.length)break;const b=i.SYMBOL_STAR in this.patterns;if(this._checkSymbolMask(m,null!==(R=e[n])&&void 0!==R?R:i.EMPTY_STRING)&&e[n+1]===i.SYMBOL_QUESTION)l+=m,n+=2;else if(e[n+1]===i.SYMBOL_STAR&&S&&this._checkSymbolMask(m,null!==(V=e[n+2])&&void 0!==V?V:i.EMPTY_STRING))l+=m,n+=3,S=!1;else if(this._checkSymbolMask(m,null!==(Y=e[n])&&void 0!==Y?Y:i.EMPTY_STRING)&&e[n+1]===i.SYMBOL_STAR&&!b)l+=m,S=!0;else if(e[n+1]===i.SYMBOL_QUESTION&&this._checkSymbolMask(m,null!==(H=e[n+2])&&void 0!==H?H:i.EMPTY_STRING))l+=m,n+=3;else if(this._checkSymbolMask(m,null!==(L=e[n])&&void 0!==L?L:i.EMPTY_STRING)){if(e[n]===i.HOURS&&(this.apm?Number(m)>9:Number(m)>2)){f=this.leadZeroDateTime?f:f+1,n+=1,this._shiftStep(n),v--,this.leadZeroDateTime&&(l+="0");continue}if(e[n]===i.HOUR&&(this.apm?1===l.length&&Number(l)>1||"1"===l&&Number(m)>2||1===r.slice(n-1,n).length&&Number(r.slice(n-1,n))>2||"1"===r.slice(n-1,n)&&Number(m)>2:"2"===l&&Number(m)>3||("2"===l.slice(n-2,n)||"2"===l.slice(n-3,n)||"2"===l.slice(n-4,n)||"2"===l.slice(n-1,n))&&Number(m)>3&&n>10)){f+=1,n+=1,v--;continue}if((e[n]===i.MINUTE||e[n]===i.SECOND)&&Number(m)>5){f=this.leadZeroDateTime?f:f+1,n+=1,this._shiftStep(n),v--,this.leadZeroDateTime&&(l+="0");continue}const A=31,U=r[n],B=r[n+1],se=r[n+2],x=r[n-1],W=r[n-2],M=r.slice(n-3,n-1),C=r.slice(n-1,n+1),D=r.slice(n,n+2),K=r.slice(n-2,n);if(e[n]===i.DAY){const j=e.slice(0,2)===i.MONTHS,Z=e.slice(0,2)===i.MONTHS&&this.specialCharacters.includes(W);if(Number(m)>3&&this.leadZeroDateTime||!j&&(Number(D)>A||Number(C)>A||this.specialCharacters.includes(B))||(Z?Number(C)>A||!this.specialCharacters.includes(U)&&this.specialCharacters.includes(se)||this.specialCharacters.includes(U):Number(D)>A||this.specialCharacters.includes(B)&&!h)){f=this.leadZeroDateTime?f:f+1,n+=1,this._shiftStep(n),v--,this.leadZeroDateTime&&(l+="0");continue}}if(e[n]===i.MONTH){const Z=0===n&&(Number(m)>2||Number(D)>12||this.specialCharacters.includes(B)&&!h),Me=e.slice(n+2,n+3),Te=M.includes(Me)&&e.includes("d0")&&(this.specialCharacters.includes(W)&&Number(C)>12&&!this.specialCharacters.includes(U)||this.specialCharacters.includes(U)),Ce=Number(M)<=A&&!this.specialCharacters.includes(M)&&this.specialCharacters.includes(x)&&(Number(D)>12||this.specialCharacters.includes(B)),Ee=Number(D)>12&&5===n||this.specialCharacters.includes(B)&&5===n,Ne=Number(M)>A&&!this.specialCharacters.includes(M)&&!this.specialCharacters.includes(K)&&Number(K)>12&&e.includes("d0"),Ae=Number(M)<=A&&!this.specialCharacters.includes(M)&&!this.specialCharacters.includes(x)&&Number(C)>12;if(Number(m)>1&&this.leadZeroDateTime||Z||Te||Ae||Ne||Ce||Ee&&!this.leadZeroDateTime){f=this.leadZeroDateTime?f:f+1,n+=1,this._shiftStep(n),v--,this.leadZeroDateTime&&(l+="0");continue}}l+=m,n++}else if(this.specialCharacters.includes(m)&&e[n]===m)l+=m,n++;else if(-1!==this.specialCharacters.indexOf(null!==(N=e[n])&&void 0!==N?N:i.EMPTY_STRING))l+=e[n],n++,this._shiftStep(n),v--;else if(e[n]===i.NUMBER_NINE&&this.showMaskTyped)this._shiftStep(n);else if(this.patterns[null!==(G=e[n])&&void 0!==G?G:i.EMPTY_STRING]&&null!==(X=this.patterns[null!==(z=e[n])&&void 0!==z?z:i.EMPTY_STRING])&&void 0!==X&&X.optional){var ee,te;T[n]&&"099.099.099.099"!==e&&"000.000.000-00"!==e&&"00.000.000/0000-00"!==e&&!e.match(/^9+\.0+$/)&&!(null!==(ee=this.patterns[null!==(te=e[n])&&void 0!==te?te:i.EMPTY_STRING])&&void 0!==ee&&ee.optional)&&(l+=T[n]),e.includes(i.NUMBER_NINE+i.SYMBOL_STAR)&&e.includes(i.NUMBER_ZERO+i.SYMBOL_STAR)&&n++,n++,v--}else this.maskExpression[n+1]===i.SYMBOL_STAR&&this._findSpecialChar(null!==(J=this.maskExpression[n+2])&&void 0!==J?J:i.EMPTY_STRING)&&this._findSpecialChar(m)===this.maskExpression[n+2]&&S||this.maskExpression[n+1]===i.SYMBOL_QUESTION&&this._findSpecialChar(null!==(q=this.maskExpression[n+2])&&void 0!==q?q:i.EMPTY_STRING)&&this._findSpecialChar(m)===this.maskExpression[n+2]&&S?(n+=3,l+=m):this.showMaskTyped&&this.specialCharacters.indexOf(m)<0&&m!==this.placeHolderCharacter&&1===this.placeHolderCharacter.length&&(k=!0)}l[f-1]&&l.length+1===e.length&&-1!==this.specialCharacters.indexOf(null!==(u=e[e.length-1])&&void 0!==u?u:i.EMPTY_STRING)&&(l+=e[e.length-1]);let ce=f+1;for(;this._shift.has(ce);)g++,ce++;let oe=a&&!e.startsWith(i.SEPARATOR)?n:this._shift.has(f)?g:0;k&&oe--,c(oe,_),g<0&&this._shift.clear();let ue=!1;h&&(ue=T.every(v=>this.specialCharacters.includes(v)));let ie=`${this.prefix}${ue?i.EMPTY_STRING:l}${this.showMaskTyped?"":this.suffix}`;0===l.length&&(ie=this.instantPrefix?`${this.prefix}${l}`:`${l}`);const ke=1===r.length&&this.specialCharacters.includes(e[0])&&r!==e[0];if(!this._checkSymbolMask(r,e[1])&&ke)return"";if(l.includes(i.MINUS)&&this.prefix&&this.allowNegativeNumbers){if(h&&l===i.MINUS)return"";ie=`${i.MINUS}${this.prefix}${l.split(i.MINUS).join(i.EMPTY_STRING)}${this.suffix}`}return ie}_findDropSpecialChar(t){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(e=>e===t):this._findSpecialChar(t)}_findSpecialChar(t){return this.specialCharacters.find(e=>e===t)}_checkSymbolMask(t,e){var s,a,h;return this.patterns=this.customPattern?this.customPattern:this.patterns,null!==(s=(null===(a=this.patterns[e])||void 0===a?void 0:a.pattern)&&(null===(h=this.patterns[e])||void 0===h?void 0:h.pattern.test(t)))&&void 0!==s&&s}_stripToDecimal(t){return t.split(i.EMPTY_STRING).filter((e,s)=>{const a="string"==typeof this.decimalMarker?e===this.decimalMarker:this.decimalMarker.includes(e);return e.match("^-?\\d")||e===this.thousandSeparator||a||e===i.MINUS&&0===s&&this.allowNegativeNumbers}).join(i.EMPTY_STRING)}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t){this._shift.add(t+this.prefix.length||0)}_compareOrIncludes(t,e,s){return Array.isArray(e)?e.filter(a=>a!==s).includes(t):t===e}_validIP(t){return!(4===t.length&&!t.some((e,s)=>t.length!==s+1?e===i.EMPTY_STRING||Number(e)>255:e===i.EMPTY_STRING||Number(e.substring(0,3))>255))}_splitPercentZero(t){if(t===i.MINUS&&this.allowNegativeNumbers)return t;const e=t.indexOf("string"==typeof this.decimalMarker?this.decimalMarker:i.DOT),s=this.allowNegativeNumbers&&t.includes(i.MINUS)?"-":"";if(-1===e){const a=parseInt(s?t.slice(1,t.length):t,10);return isNaN(a)?i.EMPTY_STRING:`${s}${a}`}{const a=parseInt(t.replace("-","").substring(0,e),10),h=t.substring(e+1),c=isNaN(a)?"":a.toString();return c===i.EMPTY_STRING?i.EMPTY_STRING:`${s}${c}${"string"==typeof this.decimalMarker?this.decimalMarker:i.DOT}${h}`}}_findFirstNonZeroAndDecimalIndex(t,e){let s=null,a=null;for(let h=0;h<t.length;h++){const c=t[h];if(c===e&&null===s&&(s=h),c&&c>="1"&&c<="9"&&null===a&&(a=h),null!==s&&null!==a)break}return{decimalMarkerIndex:s,nonZeroIndex:a}}}return p=E,(0,o.A)(E,"\u0275fac",function(t){return new(t||p)}),(0,o.A)(E,"\u0275prov",d.jDH({token:p,factory:p.\u0275fac})),E})(),Q=(()=>{var p;class E extends Se{constructor(...t){super(...t),(0,o.A)(this,"isNumberValue",!1),(0,o.A)(this,"maskIsShown",""),(0,o.A)(this,"selStart",null),(0,o.A)(this,"selEnd",null),(0,o.A)(this,"maskChanged",!1),(0,o.A)(this,"maskExpressionArray",[]),(0,o.A)(this,"triggerOnMaskChange",!1),(0,o.A)(this,"previousValue",""),(0,o.A)(this,"currentValue",""),(0,o.A)(this,"writingValue",!1),(0,o.A)(this,"_emitValue",!1),(0,o.A)(this,"_start",void 0),(0,o.A)(this,"_end",void 0),(0,o.A)(this,"onChange",e=>{}),(0,o.A)(this,"_elementRef",(0,d.WQX)(d.aKT,{optional:!0})),(0,o.A)(this,"document",(0,d.WQX)(re.q)),(0,o.A)(this,"_config",(0,d.WQX)($)),(0,o.A)(this,"_renderer",(0,d.WQX)(d.sFG,{optional:!0}))}applyMask(t,e,s=0,a=!1,h=!1,c=()=>{}){var u,n;if(!e)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():i.EMPTY_STRING,this.maskExpression===i.IP&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||i.HASH)),this.maskExpression===i.CPF_CNPJ&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||i.HASH)),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;const l=t&&"number"==typeof this.selStart&&null!==(u=t[this.selStart])&&void 0!==u?u:i.EMPTY_STRING;let S="",_=s;if((this.hiddenInput||t&&t.indexOf(i.SYMBOL_STAR)>=0)&&!this.writingValue){let f=t&&1===t.length?t.split(i.EMPTY_STRING):this.actualValue.split(i.EMPTY_STRING);h&&(f=f.slice(0,s).concat(f.slice(s+1))),this.showMaskTyped&&(t=this.removeMask(t),f=this.removeMask(f.join("")).split(i.EMPTY_STRING)),"object"==typeof this.selStart&&"object"==typeof this.selEnd?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):t!==i.EMPTY_STRING&&f.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>f.length?f.splice(this.selStart,0,l):t.length<f.length&&(f.length-t.length==1?f.splice(h?this.selStart-1:t.length-1,1):f.splice(this.selStart,this.selEnd-this.selStart))):f=[],this.showMaskTyped&&!this.hiddenInput&&(S=this.removeMask(t)),S=this.actualValue.length?f.length<t.length?this.shiftTypedSymbols(f.join(i.EMPTY_STRING)):f.length===t.length?f.join(i.EMPTY_STRING):t:t}if(a&&(this.hiddenInput||!this.hiddenInput)&&(S=t),h&&-1!==this.specialCharacters.indexOf(null!==(n=this.maskExpression[_])&&void 0!==n?n:i.EMPTY_STRING)&&this.showMaskTyped&&!this.prefix&&(S=this.currentValue),this.deletedSpecialCharacter&&_&&(this.specialCharacters.includes(this.actualValue.slice(_,_+1))?_+=1:e.slice(_-1,_+1)!==i.MONTHS&&(_-=2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&1===this.placeHolderCharacter.length&&!this.leadZeroDateTime&&(S=this.removeMask(S)),S=this.maskChanged?t:S&&S.length?S:t,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!a&&!this.writingValue){const f=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(f),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}const g=super.applyMask(S,e,_,a,h,c);if(this.actualValue=this.getActualValue(g),this.thousandSeparator===i.DOT&&this.decimalMarker===i.DOT&&(this.decimalMarker=i.COMMA),this.maskExpression.startsWith(i.SEPARATOR)&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter(f=>!this._compareOrIncludes(f,this.decimalMarker,this.thousandSeparator))),(g||""===g)&&(this.previousValue=this.currentValue,this.currentValue=g,this._emitValue=this.previousValue!==this.currentValue||this.maskChanged||this.writingValue||this.previousValue===this.currentValue&&a),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(g)):this.formControlResult(g)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?`${this.hideInput(g,this.maskExpression)}${this.maskIsShown.slice(g.length)}`:g;const k=g.length,r=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes(i.HOURS)){const f=this._numberSkipedSymbols(g);return`${g}${r.slice(k+f)}`}return this.maskExpression===i.IP||this.maskExpression===i.CPF_CNPJ?`${g}${r}`:`${g}${r.slice(k)}`}_numberSkipedSymbols(t){const e=/(^|\D)(\d\D)/g;let s=e.exec(t),a=0;for(;null!=s;)a+=1,s=e.exec(t);return a}applyValueChanges(t,e,s,a=()=>{}){var h;const c=null===(h=this._elementRef)||void 0===h?void 0:h.nativeElement;c&&(c.value=this.applyMask(c.value,this.maskExpression,t,e,s,a),c!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(t,e){return t.split(i.EMPTY_STRING).map((s,a)=>{var h,c,u,n,l;return this.patterns&&this.patterns[null!==(h=e[a])&&void 0!==h?h:i.EMPTY_STRING]&&null!==(c=this.patterns[null!==(u=e[a])&&void 0!==u?u:i.EMPTY_STRING])&&void 0!==c&&c.symbol?null===(n=this.patterns[null!==(l=e[a])&&void 0!==l?l:i.EMPTY_STRING])||void 0===n?void 0:n.symbol:s}).join(i.EMPTY_STRING)}getActualValue(t){const e=t.split(i.EMPTY_STRING).filter((s,a)=>{var h;const c=null!==(h=this.maskExpression[a])&&void 0!==h?h:i.EMPTY_STRING;return this._checkSymbolMask(s,c)||this.specialCharacters.includes(c)&&s===c});return e.join(i.EMPTY_STRING)===t?e.join(i.EMPTY_STRING):t}shiftTypedSymbols(t){let e="";return(t&&t.split(i.EMPTY_STRING).map((a,h)=>{var c;if(this.specialCharacters.includes(null!==(c=t[h+1])&&void 0!==c?c:i.EMPTY_STRING)&&t[h+1]!==this.maskExpression[h+1])return e=a,t[h+1];if(e.length){const u=e;return e=i.EMPTY_STRING,u}return a})||[]).join(i.EMPTY_STRING)}numberToString(t){return!t&&0!==t||this.maskExpression.startsWith(i.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith(i.SEPARATOR)&&this.separatorLimit.length>14&&String(t).length>14?String(t):Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace(`/${i.MINUS}/`,i.MINUS)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if(this.maskExpression===i.IP)return this._checkForIp(t);if(this.maskExpression===i.CPF_CNPJ)return this._checkForCpfCnpj(t)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){var t;const e=null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement;e&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==e.value.replace(this.placeHolderCharacter,i.EMPTY_STRING).length&&(this.formElementProperty=["value",i.EMPTY_STRING],this.applyMask("",this.maskExpression))}set formElementProperty([t,e]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>{var s,a;return null===(s=this._renderer)||void 0===s?void 0:s.setProperty(null===(a=this._elementRef)||void 0===a?void 0:a.nativeElement,t,e)})}checkDropSpecialCharAmount(t){return t.split(i.EMPTY_STRING).filter(s=>this._findDropSpecialChar(s)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if(t===i.HASH)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const e=[];for(let a=0;a<t.length;a++){var s;const h=null!==(s=t[a])&&void 0!==s?s:i.EMPTY_STRING;h&&h.match("\\d")&&e.push(h)}return e.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>3&&e.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>6&&e.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){const e=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,s=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(t===i.HASH)return e;const a=[];for(let c=0;c<t.length;c++){var h;const u=null!==(h=t[c])&&void 0!==h?h:i.EMPTY_STRING;u&&u.match("\\d")&&a.push(u)}return a.length<=3?e.slice(a.length,e.length):a.length>3&&a.length<=6?e.slice(a.length+1,e.length):a.length>6&&a.length<=9?e.slice(a.length+2,e.length):a.length>9&&a.length<11?e.slice(a.length+3,e.length):11===a.length?"":12===a.length?s.slice(17===t.length?16:15,s.length):a.length>12&&a.length<=14?s.slice(a.length+4,s.length):""}_getActiveElement(t=this.document){var e;const s=null==t||null===(e=t.activeElement)||void 0===e?void 0:e.shadowRoot;return null!=s&&s.activeElement?this._getActiveElement(s):t.activeElement}formControlResult(t){if(!this.writingValue||t)return this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?(this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))),this.writingValue=!1,void(this.maskChanged=!1)):void(Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))))):this.onChange(this.outputTransformFn(this._toNumber(this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===t?this._checkSymbols(this._removeSuffix(this._removePrefix(t))):t))));this.onChange(this.outputTransformFn(null))}_toNumber(t){if(!this.isNumberValue||t===i.EMPTY_STRING||this.maskExpression.startsWith(i.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters))return t;if(String(t).length>14&&this.maskExpression.startsWith(i.SEPARATOR))return String(t);const e=Number(t);if(this.maskExpression.startsWith(i.SEPARATOR)&&Number.isNaN(e)){const s=String(t).replace(",",".");return Number(s)}return Number.isNaN(e)?t:e}_removeMask(t,e){return this.maskExpression.startsWith(i.PERCENT)&&t.includes(i.DOT)?t:t&&t.replace(this._regExpForRemove(e),i.EMPTY_STRING)}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,i.EMPTY_STRING):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,i.EMPTY_STRING):t}_retrieveSeparatorValue(t){let e=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(s=>this.dropSpecialCharacters.includes(s)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&t.includes(i.WHITE_SPACE)&&this.maskExpression.includes(i.SYMBOL_STAR)&&(e=e.filter(s=>s!==i.WHITE_SPACE)),this._removeMask(t,e)}_regExpForRemove(t){return new RegExp(t.map(e=>`\\${e}`).join("|"),"gi")}_replaceDecimalMarkerToDot(t){const e=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return t.replace(this._regExpForRemove(e),i.DOT)}_checkSymbols(t){let e=t;if(e===i.EMPTY_STRING)return e;this.maskExpression.startsWith(i.PERCENT)&&this.decimalMarker===i.COMMA&&(e=e.replace(i.COMMA,i.DOT));const s=this._retrieveSeparatorPrecision(this.maskExpression),a=0===this.specialCharacters.length?this._retrieveSeparatorValue(e):this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(e));return this.isNumberValue&&s?e===this.decimalMarker?null:a.length>14?String(a):this._checkPrecision(this.maskExpression,a):a}_checkPatternForSpace(){for(const a in this.patterns){var t;if(this.patterns[a]&&null!==(t=this.patterns[a])&&void 0!==t&&t.hasOwnProperty("pattern")){var e,s;const h=null===(e=this.patterns[a])||void 0===e?void 0:e.pattern.toString(),c=null===(s=this.patterns[a])||void 0===s?void 0:s.pattern;if(null!=h&&h.includes(i.WHITE_SPACE)&&null!=c&&c.test(this.maskExpression))return!0}}return!1}_retrieveSeparatorPrecision(t){const e=t.match(new RegExp("^separator\\.([^d]*)"));return e?Number(e[1]):null}_checkPrecision(t,e){const s=this.getPrecision(t);let a=e;return t.indexOf("2")>0||this.leadZero&&Number(s)>0?(this.decimalMarker===i.COMMA&&this.leadZero&&(a=a.replace(",",".")),this.leadZero?Number(a).toFixed(Number(s)):Number(a).toFixed(2)):this.numberToString(a)}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split(i.EMPTY_STRING).reduce((e,s,a)=>{if(this._start=s===i.CURLY_BRACKETS_LEFT?a:this._start,s!==i.CURLY_BRACKETS_RIGHT)return this._findSpecialChar(s)?e+s:e;this._end=a;const h=Number(t.slice(this._start+1,this._end)),c=new Array(h+1).join(t[this._start-1]);if(t.slice(0,this._start).length>1&&t.includes(i.LETTER_S)){const u=t.slice(0,this._start-1);return u.includes(i.CURLY_BRACKETS_LEFT)?e+c:u+e+c}return e+c},"")||t}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}}return p=E,(0,o.A)(E,"\u0275fac",(()=>{let I;return function(e){return(I||(I=d.xGo(p)))(e||p)}})()),(0,o.A)(E,"\u0275prov",d.jDH({token:p,factory:p.\u0275fac})),E})();function ge(){const p=(0,d.WQX)(le),E=(0,d.WQX)(ne);return E instanceof Function?{...p,...E()}:{...p,...E}}function he(p){return[{provide:ne,useValue:p},{provide:le,useValue:de},{provide:$,useFactory:ge},Q]}let ve=(()=>{var p;class E{constructor(){(0,o.A)(this,"mask",(0,d.hFB)("")),(0,o.A)(this,"specialCharacters",(0,d.hFB)([])),(0,o.A)(this,"patterns",(0,d.hFB)({})),(0,o.A)(this,"prefix",(0,d.hFB)("")),(0,o.A)(this,"suffix",(0,d.hFB)("")),(0,o.A)(this,"thousandSeparator",(0,d.hFB)(" ")),(0,o.A)(this,"decimalMarker",(0,d.hFB)(".")),(0,o.A)(this,"dropSpecialCharacters",(0,d.hFB)(null)),(0,o.A)(this,"hiddenInput",(0,d.hFB)(null)),(0,o.A)(this,"showMaskTyped",(0,d.hFB)(null)),(0,o.A)(this,"placeHolderCharacter",(0,d.hFB)(null)),(0,o.A)(this,"shownMaskExpression",(0,d.hFB)(null)),(0,o.A)(this,"clearIfNotMatch",(0,d.hFB)(null)),(0,o.A)(this,"validation",(0,d.hFB)(null)),(0,o.A)(this,"separatorLimit",(0,d.hFB)("")),(0,o.A)(this,"allowNegativeNumbers",(0,d.hFB)(null)),(0,o.A)(this,"leadZeroDateTime",(0,d.hFB)(null)),(0,o.A)(this,"leadZero",(0,d.hFB)(null)),(0,o.A)(this,"triggerOnMaskChange",(0,d.hFB)(null)),(0,o.A)(this,"apm",(0,d.hFB)(null)),(0,o.A)(this,"inputTransformFn",(0,d.hFB)(null)),(0,o.A)(this,"outputTransformFn",(0,d.hFB)(null)),(0,o.A)(this,"keepCharacterPositions",(0,d.hFB)(null)),(0,o.A)(this,"instantPrefix",(0,d.hFB)(null)),(0,o.A)(this,"maskFilled",(0,d.CGW)()),(0,o.A)(this,"_maskValue",(0,d.vPA)("")),(0,o.A)(this,"_inputValue",(0,d.vPA)("")),(0,o.A)(this,"_position",(0,d.vPA)(null)),(0,o.A)(this,"_code",(0,d.vPA)("")),(0,o.A)(this,"_maskExpressionArray",(0,d.vPA)([])),(0,o.A)(this,"_justPasted",(0,d.vPA)(!1)),(0,o.A)(this,"_isFocused",(0,d.vPA)(!1)),(0,o.A)(this,"_isComposing",(0,d.vPA)(!1)),(0,o.A)(this,"_maskService",(0,d.WQX)(Q,{self:!0})),(0,o.A)(this,"document",(0,d.WQX)(re.q)),(0,o.A)(this,"_config",(0,d.WQX)($)),(0,o.A)(this,"onChange",t=>{}),(0,o.A)(this,"onTouch",()=>{})}ngOnChanges(t){const{mask:e,specialCharacters:s,patterns:a,prefix:h,suffix:c,thousandSeparator:u,decimalMarker:n,dropSpecialCharacters:l,hiddenInput:S,showMaskTyped:_,placeHolderCharacter:g,shownMaskExpression:k,clearIfNotMatch:r,validation:f,separatorLimit:T,allowNegativeNumbers:y,leadZeroDateTime:w,leadZero:O,triggerOnMaskChange:P,apm:R,inputTransformFn:V,outputTransformFn:Y,keepCharacterPositions:H,instantPrefix:L}=t;if(e&&(e.currentValue!==e.previousValue&&!e.firstChange&&(this._maskService.maskChanged=!0),e.currentValue&&e.currentValue.split(i.OR).length>1?(this._maskExpressionArray.set(e.currentValue.split(i.OR).sort((N,G)=>N.length-G.length)),this._setMask()):(this._maskExpressionArray.set([]),this._maskValue.set(e.currentValue||i.EMPTY_STRING),this._maskService.maskExpression=this._maskValue())),s){if(!s.currentValue||!Array.isArray(s.currentValue))return;this._maskService.specialCharacters=s.currentValue||[]}if(y&&(this._maskService.allowNegativeNumbers=y.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(N=>N!==i.MINUS))),a&&a.currentValue&&(this._maskService.patterns=a.currentValue),R&&R.currentValue&&(this._maskService.apm=R.currentValue),L&&(this._maskService.instantPrefix=L.currentValue),h&&(this._maskService.prefix=h.currentValue),c&&(this._maskService.suffix=c.currentValue),u&&(this._maskService.thousandSeparator=u.currentValue,u.previousValue&&u.currentValue)){const N=this._maskService.decimalMarker;u.currentValue===this._maskService.decimalMarker&&(this._maskService.decimalMarker=u.currentValue===i.COMMA?i.DOT:i.COMMA),!0===this._maskService.dropSpecialCharacters&&(this._maskService.specialCharacters=this._config.specialCharacters),"string"==typeof N&&"string"==typeof this._maskService.decimalMarker&&(this._inputValue.set(this._inputValue().split(u.previousValue).join("").replace(N,this._maskService.decimalMarker)),this._maskService.actualValue=this._inputValue()),this._maskService.writingValue=!0}n&&(this._maskService.decimalMarker=n.currentValue),l&&(this._maskService.dropSpecialCharacters=l.currentValue),S&&(this._maskService.hiddenInput=S.currentValue,!0===S.previousValue&&!1===S.currentValue&&this._inputValue.set(this._maskService.actualValue)),_&&(this._maskService.showMaskTyped=_.currentValue,!1===_.previousValue&&!0===_.currentValue&&this._isFocused()&&requestAnimationFrame(()=>{var N;null===(N=this._maskService._elementRef)||void 0===N||N.nativeElement.click()})),g&&(this._maskService.placeHolderCharacter=g.currentValue),k&&(this._maskService.shownMaskExpression=k.currentValue),r&&(this._maskService.clearIfNotMatch=r.currentValue),f&&(this._maskService.validation=f.currentValue),T&&(this._maskService.separatorLimit=T.currentValue),w&&(this._maskService.leadZeroDateTime=w.currentValue),O&&(this._maskService.leadZero=O.currentValue),P&&(this._maskService.triggerOnMaskChange=P.currentValue),V&&(this._maskService.inputTransformFn=V.currentValue),Y&&(this._maskService.outputTransformFn=Y.currentValue),H&&(this._maskService.keepCharacterPositions=H.currentValue),this._applyMask()}validate({value:t}){const e="number"==typeof t?String(t):t,s=this._maskValue();if(!this._maskService.validation||!s)return null;if(this._maskService.ipError)return this._createValidationError(e);if(this._maskService.cpfCnpjError)return this._createValidationError(e);if(s.startsWith(i.SEPARATOR)||_e.includes(s)||this._maskService.clearIfNotMatch)return null;if(me.includes(s))return this._validateTime(e);if(s===i.EMAIL_MASK)return!/^[^@]+@[^@]+\.[^@]+$/.test(e)&&e?this._createValidationError(e):null;if(e&&e.length>=1){let c=0;if(s.includes(i.CURLY_BRACKETS_LEFT)&&s.includes(i.CURLY_BRACKETS_RIGHT))return s.slice(s.indexOf(i.CURLY_BRACKETS_LEFT)+1,s.indexOf(i.CURLY_BRACKETS_RIGHT))===String(e.length)?null:this._createValidationError(e);if(s.startsWith(i.PERCENT))return null;for(const u in this._maskService.patterns){var a;if(null!==(a=this._maskService.patterns[u])&&void 0!==a&&a.optional&&(s.indexOf(u)!==s.lastIndexOf(u)?c+=s.split(i.EMPTY_STRING).filter(l=>l===u).join(i.EMPTY_STRING).length:-1!==s.indexOf(u)&&c++,-1!==s.indexOf(u)&&e.length>=s.indexOf(u)||c===s.length))return null}if(s.indexOf(i.SYMBOL_STAR)>1&&e.length<s.indexOf(i.SYMBOL_STAR)||s.indexOf(i.SYMBOL_QUESTION)>1&&e.length<s.indexOf(i.SYMBOL_QUESTION))return this._createValidationError(e);if(-1===s.indexOf(i.SYMBOL_STAR)||-1===s.indexOf(i.SYMBOL_QUESTION)){const u=s.split("*"),n=this._maskService.dropSpecialCharacters?s.length-this._maskService.checkDropSpecialCharAmount(s)-c:this.prefix()?s.length+this.prefix().length-c:s.length-c;if(1===u.length&&e.length<n)return this._createValidationError(e);if(u.length>1){var h;const l=u[u.length-1];if(l&&this._maskService.specialCharacters.includes(l[0])&&String(e).includes(null!==(h=l[0])&&void 0!==h?h:"")&&!this.dropSpecialCharacters()){const S=t.split(l[0]);return S[S.length-1].length===l.length-1?null:this._createValidationError(e)}return(l&&!this._maskService.specialCharacters.includes(l[0])||!l||this._maskService.dropSpecialCharacters)&&e.length>=n-1?null:this._createValidationError(e)}}if(1===s.indexOf(i.SYMBOL_STAR)||1===s.indexOf(i.SYMBOL_QUESTION))return null}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted.set(!0)}onFocus(){this._isFocused.set(!0)}onModelChange(t){(t===i.EMPTY_STRING||null===t||typeof t>"u")&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(i.EMPTY_STRING))}onInput(t){if(this._isComposing())return;const e=t.target,s=this._maskService.inputTransformFn(e.value);if("number"!==e.type)if("string"==typeof s||"number"==typeof s){if(e.value=s.toString(),this._inputValue.set(e.value),this._setMask(),!this._maskValue())return void this.onChange(e.value);let l=1===e.selectionStart?e.selectionStart+this._maskService.prefix.length:e.selectionStart;if(this.showMaskTyped()&&this.keepCharacterPositions()&&1===this._maskService.placeHolderCharacter.length){var a,h;const k=this.suffix(),r=this.prefix(),f=e.value.slice(l-1,l),T=r.length,y=this._maskService._checkSymbolMask(f,null!==(a=this._maskService.maskExpression[l-1-T])&&void 0!==a?a:i.EMPTY_STRING),w=this._maskService._checkSymbolMask(f,null!==(h=this._maskService.maskExpression[l+1-T])&&void 0!==h?h:i.EMPTY_STRING),O=this._maskService.selStart===this._maskService.selEnd,P=Number(this._maskService.selStart)-T,R=Number(this._maskService.selEnd)-T,V=this._code()===i.BACKSPACE||this._code()===i.DELETE;if(V){if(O){if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(l-T,l+1-T))&&O)if(1===P&&r)this._maskService.actualValue=`${r}${this._maskService.placeHolderCharacter}${e.value.split(r).join("").split(k).join("")}${k}`,l-=1;else{const Y=e.value.substring(0,l),H=e.value.substring(l);this._maskService.actualValue=`${Y}${this._maskService.placeHolderCharacter}${H}`}}else this._maskService.actualValue=this._maskService.selStart===T?`${r}${this._maskService.maskIsShown.slice(0,R)}${this._inputValue().split(r).join("")}`:this._maskService.selStart===this._maskService.maskIsShown.length+T?`${this._inputValue()}${this._maskService.maskIsShown.slice(P,R)}`:`${r}${this._inputValue().split(r).join("").slice(0,P)}${this._maskService.maskIsShown.slice(P,R)}${this._maskService.actualValue.slice(R+T,this._maskService.maskIsShown.length+T)}${k}`;l=this._code()===i.DELETE?l+1:l}var c;V||(y||w||!O?this._maskService.specialCharacters.includes(e.value.slice(l,l+1))&&w&&!this._maskService.specialCharacters.includes(e.value.slice(l+1,l+2))?(this._maskService.actualValue=`${e.value.slice(0,l-1)}${e.value.slice(l,l+1)}${f}${e.value.slice(l+2)}`,l+=1):y?this._maskService.actualValue=1===e.value.length&&1===l?`${r}${f}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${k}`:`${e.value.slice(0,l-1)}${f}${e.value.slice(l+1).split(k).join("")}${k}`:r&&1===e.value.length&&l-T==1&&this._maskService._checkSymbolMask(e.value,null!==(c=this._maskService.maskExpression[l-1-T])&&void 0!==c?c:i.EMPTY_STRING)&&(this._maskService.actualValue=`${r}${e.value}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${k}`):l=Number(e.selectionStart)-1)}let S=0,_=!1;if(this._code()===i.DELETE&&i.SEPARATOR&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue().length>=this._maskService.maskExpression.length-1&&this._code()!==i.BACKSPACE&&this._maskService.maskExpression===i.DAYS_MONTHS_YEARS&&l<10){const k=this._inputValue().slice(l-1,l);e.value=this._inputValue().slice(0,l-1)+k+this._inputValue().slice(l+1)}if(this._maskService.maskExpression===i.DAYS_MONTHS_YEARS&&this.leadZeroDateTime()&&(l<3&&Number(e.value)>31&&Number(e.value)<40||5===l&&Number(e.value.slice(3,5))>12)&&(l+=2),this._maskService.maskExpression===i.HOURS_MINUTES_SECONDS&&this.apm()&&(this._justPasted()&&e.value.slice(0,2)===i.DOUBLE_ZERO&&(e.value=e.value.slice(1,2)+e.value.slice(2,e.value.length)),e.value=e.value===i.DOUBLE_ZERO?i.NUMBER_ZERO:e.value),this._maskService.applyValueChanges(l,this._justPasted(),this._code()===i.BACKSPACE||this._code()===i.DELETE,(k,r)=>{this._justPasted.set(!1),S=k,_=r}),this._getActiveElement()!==e)return;if(this._maskService.plusOnePosition&&(l+=1,this._maskService.plusOnePosition=!1),this._maskExpressionArray().length)if(this._code()===i.BACKSPACE){var u,n;const k=this.specialCharacters().includes(this._maskService.actualValue.slice(l-1,l)),r=(null===(u=this._maskService.removeMask(this._inputValue()))||void 0===u?void 0:u.length)===(null===(n=this._maskService.removeMask(this._maskService.maskExpression))||void 0===n?void 0:n.length),f=this.specialCharacters().includes(this._maskService.actualValue.slice(l,l+1));l=r&&!f?e.selectionStart+1:k?l-1:l}else l=1===e.selectionStart?e.selectionStart+this._maskService.prefix.length:e.selectionStart;this._position.set(1===this._position()&&1===this._inputValue().length?null:this._position());let g=this._position()?this._inputValue().length+l+S:l+(this._code()!==i.BACKSPACE||_?S:0);g>this._getActualInputLength()&&(g=e.value===this._maskService.decimalMarker&&1===e.value.length?this._getActualInputLength()+1:this._getActualInputLength()),g<0&&(g=0),e.setSelectionRange(g,g),this._position.set(null)}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof s);else{if(!this._maskValue())return void this.onChange(e.value);this._maskService.applyValueChanges(e.value.length,this._justPasted(),this._code()===i.BACKSPACE||this._code()===i.DELETE)}}onCompositionStart(){this._isComposing.set(!0)}onCompositionEnd(t){this._isComposing.set(!1),this._justPasted.set(!0),this.onInput(t)}onBlur(t){if(this._maskValue()){const e=t.target;if(this._maskService.leadZero&&e.value.length>0&&"string"==typeof this._maskService.decimalMarker){const s=this._maskService.maskExpression,a=this._maskService.decimalMarker,h=this._maskService.suffix,c=Number(this._maskService.maskExpression.slice(s.length-1,s.length));if(c>0){e.value=h?e.value.split(h).join(""):e.value;const u=e.value.split(a)[1];e.value=e.value.includes(a)?e.value+i.NUMBER_ZERO.repeat(c-u.length)+h:e.value+a+i.NUMBER_ZERO.repeat(c)+h,this._maskService.actualValue=e.value}}this._maskService.clearIfNotMatchFn()}this._isFocused.set(!1),this.onTouch()}onClick(t){if(!this._maskValue())return;const e=t.target;null!==e&&null!==e.selectionStart&&e.selectionStart===e.selectionEnd&&e.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&!this.keepCharacterPositions()&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),e.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===e.value?(e.focus(),e.setSelectionRange(0,0)):e.selectionStart>this._maskService.actualValue.length&&e.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const h=e&&(e.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:e.value);if(e&&e.value!==h&&(e.value=h),e&&"number"!==e.type&&(e.selectionStart||e.selectionEnd)<=this._maskService.prefix.length){var c;const u=(null===(c=this._maskService.maskExpression.match(new RegExp(`^[${this._maskService.specialCharacters.map(n=>`\\${n}`).join("")}]+`)))||void 0===c?void 0:c[0].length)||0;e.selectionStart=this._maskService.prefix.length+u}else e&&e.selectionEnd>this._getActualInputLength()&&(e.selectionEnd=this._getActualInputLength())}onKeyDown(t){if(!this._maskValue())return;if(this._isComposing())return void("Enter"===t.key&&this.onCompositionEnd(t));this._code.set(t.code?t.code:t.key);const e=t.target;if(this._inputValue.set(e.value),this._setMask(),"number"!==e.type){if(t.key===i.ARROW_UP&&t.preventDefault(),t.key===i.ARROW_LEFT||t.key===i.BACKSPACE||t.key===i.DELETE){if(t.key===i.BACKSPACE&&0===e.value.length&&(e.selectionStart=e.selectionEnd),t.key===i.BACKSPACE&&0!==e.selectionStart){const h=this.prefix().length,c=this.specialCharacters().length?this.specialCharacters():this._config.specialCharacters;if(h>1&&e.selectionStart<=h)e.setSelectionRange(h,e.selectionEnd);else if(this._inputValue().length!==e.selectionStart&&1!==e.selectionStart)for(;c.includes((null!==(s=this._inputValue()[e.selectionStart-1])&&void 0!==s?s:i.EMPTY_STRING).toString())&&(h>=1&&e.selectionStart>h||0===h);){var s;e.setSelectionRange(e.selectionStart-1,e.selectionEnd)}}this.checkSelectionOnDeletion(e),this._maskService.prefix.length&&e.selectionStart<=this._maskService.prefix.length&&e.selectionEnd<=this._maskService.prefix.length&&t.preventDefault(),t.key===i.BACKSPACE&&!e.readOnly&&0===e.selectionStart&&e.selectionEnd===e.value.length&&0!==e.value.length&&(this._position.set(this._maskService.prefix?this._maskService.prefix.length:0),this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position()))}this.suffix()&&this.suffix().length>1&&this._inputValue().length-this.suffix().length<e.selectionStart?e.setSelectionRange(this._inputValue().length-this.suffix().length,this._inputValue().length):("KeyA"===t.code&&t.ctrlKey||"KeyA"===t.code&&t.metaKey)&&(e.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=e.selectionStart,this._maskService.selEnd=e.selectionEnd}}writeValue(t){var e=this;return(0,pe.A)(function*(){let s=t;const a=e.inputTransformFn();if("object"==typeof s&&null!==s&&"value"in s&&("disable"in s&&e.setDisabledState(!!s.disable),s=s.value),null!==s&&(s=a?a(s):s),"string"==typeof s||"number"==typeof s||null===s||typeof s>"u"){(null===s||typeof s>"u"||""===s)&&(e._maskService.currentValue="",e._maskService.previousValue="");let c=s;if("number"==typeof c||e._maskValue().startsWith(i.SEPARATOR)){var h;c=String(c);const u=e._maskService.currentLocaleDecimalMarker();Array.isArray(e._maskService.decimalMarker)||(c=e._maskService.decimalMarker!==u?c.replace(u,e._maskService.decimalMarker):c),e._maskService.leadZero&&c&&e.mask()&&!1!==e.dropSpecialCharacters()&&(c=e._maskService._checkPrecision(e._maskService.maskExpression,c)),(e._maskService.decimalMarker===i.COMMA||Array.isArray(e._maskService.decimalMarker)&&e._maskService.thousandSeparator===i.DOT)&&(c=c.toString().replace(i.DOT,i.COMMA)),null!==(h=e.mask())&&void 0!==h&&h.startsWith(i.SEPARATOR)&&e.leadZero()&&requestAnimationFrame(()=>{var n,l;e._maskService.applyMask(null!==(n=null===(l=c)||void 0===l?void 0:l.toString())&&void 0!==n?n:"",e._maskService.maskExpression)}),e._maskService.isNumberValue=!0}("string"!=typeof c||null===s||typeof s>"u")&&(c=""),e._inputValue.set(c),e._setMask(),c&&e._maskService.maskExpression||e._maskService.maskExpression&&(e._maskService.prefix||e._maskService.showMaskTyped)?("function"!=typeof a&&(e._maskService.writingValue=!0),e._maskService.formElementProperty=["value",e._maskService.applyMask(c,e._maskService.maskExpression)],"function"!=typeof a&&(e._maskService.writingValue=!1)):e._maskService.formElementProperty=["value",c],e._inputValue.set(c)}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof s)})()}registerOnChange(t){this._maskService.onChange=this.onChange=t}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){var e;const s=null==t||null===(e=t.activeElement)||void 0===e?void 0:e.shadowRoot;return null!=s&&s.activeElement?this._getActiveElement(s):t.activeElement}checkSelectionOnDeletion(t){const e=this.prefix().length,s=this.suffix().length,a=this._inputValue().length;t.selectionStart=Math.min(Math.max(e,t.selectionStart),a-s),t.selectionEnd=Math.min(Math.max(e,t.selectionEnd),a-s)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue()||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue(),this._maskService.maskExpression)]}_validateTime(t){var e;const s=this._maskValue().split(i.EMPTY_STRING).filter(a=>":"!==a).length;return t&&(0==+(null!==(e=t[t.length-1])&&void 0!==e?e:-1)&&t.length<s||t.length<=s-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue(),actualValue:t}}}_setMask(){this._maskExpressionArray().some(t=>{if(t.split(i.EMPTY_STRING).some(u=>this._maskService.specialCharacters.includes(u))&&this._inputValue()&&this._areAllCharactersInEachStringSame(this._maskExpressionArray())||t.includes(i.CURLY_BRACKETS_LEFT)){var s,a;const u=(null===(s=this._maskService.removeMask(this._inputValue()))||void 0===s?void 0:s.length)<=(null===(a=this._maskService.removeMask(t))||void 0===a?void 0:a.length);if(u){const n=t.includes(i.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(t):t;return this._maskValue.set(n),this._maskService.maskExpression=n,u}{var h;const n=null!==(h=this._maskExpressionArray()[this._maskExpressionArray().length-1])&&void 0!==h?h:i.EMPTY_STRING,l=n.includes(i.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(n):n;this._maskValue.set(l),this._maskService.maskExpression=l}}else{var c;const u=this._maskService.removeMask(t),n=null===(c=this._maskService.removeMask(this._inputValue()))||void 0===c?void 0:c.split(i.EMPTY_STRING).every((l,S)=>{const _=u.charAt(S);return this._maskService._checkSymbolMask(l,_)});if(n||this._justPasted())return this._maskValue.set(t),this._maskService.maskExpression=t,n}})}_areAllCharactersInEachStringSame(t){const e=this._maskService.specialCharacters;return t.map(function s(h){const c=new RegExp(`[${e.map(u=>`\\${u}`).join("")}]`,"g");return h.replace(c,"")}).every(h=>1===new Set(h).size)}}return p=E,(0,o.A)(E,"\u0275fac",function(t){return new(t||p)}),(0,o.A)(E,"\u0275dir",d.FsC({type:p,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,e){1&t&&d.bIt("paste",function(){return e.onPaste()})("focus",function(a){return e.onFocus(a)})("ngModelChange",function(a){return e.onModelChange(a)})("input",function(a){return e.onInput(a)})("compositionstart",function(a){return e.onCompositionStart(a)})("compositionend",function(a){return e.onCompositionEnd(a)})("blur",function(a){return e.onBlur(a)})("click",function(a){return e.onClick(a)})("keydown",function(a){return e.onKeyDown(a)})},inputs:{mask:[1,"mask"],specialCharacters:[1,"specialCharacters"],patterns:[1,"patterns"],prefix:[1,"prefix"],suffix:[1,"suffix"],thousandSeparator:[1,"thousandSeparator"],decimalMarker:[1,"decimalMarker"],dropSpecialCharacters:[1,"dropSpecialCharacters"],hiddenInput:[1,"hiddenInput"],showMaskTyped:[1,"showMaskTyped"],placeHolderCharacter:[1,"placeHolderCharacter"],shownMaskExpression:[1,"shownMaskExpression"],clearIfNotMatch:[1,"clearIfNotMatch"],validation:[1,"validation"],separatorLimit:[1,"separatorLimit"],allowNegativeNumbers:[1,"allowNegativeNumbers"],leadZeroDateTime:[1,"leadZeroDateTime"],leadZero:[1,"leadZero"],triggerOnMaskChange:[1,"triggerOnMaskChange"],apm:[1,"apm"],inputTransformFn:[1,"inputTransformFn"],outputTransformFn:[1,"outputTransformFn"],keepCharacterPositions:[1,"keepCharacterPositions"],instantPrefix:[1,"instantPrefix"]},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[d.Jv_([{provide:ae.kq,useExisting:p,multi:!0},{provide:ae.cz,useExisting:p,multi:!0},Q]),d.OA$]})),E})()}}]);